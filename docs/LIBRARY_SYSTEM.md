# Library Vault System

## 📚 PURPOSE

The Library Vault is MyAIM-Central's **education and tools hub** - where moms learn to use AI and access powerful family tools, all beautifully organized like Netflix meets Pinterest.

**Key Innovation:** Social engagement on tools (internal community) + "Add to Dashboard" for instant access.

---

## 🎯 THREE CORE FUNCTIONS

### 1. Education Hub
Teach moms who've never used AI how to become power users
- Step-by-step tutorials
- Video walkthroughs (Gamma embeds)
- Safe practice environments
- Progressive skill building

### 2. Tool Library
Ready-to-use AI tools requiring no technical knowledge
- Meal planners
- Homework helpers
- Story generators
- Task breakers
- Budget trackers
- And 100+ more

### 3. Community Knowledge
Learn from other moms' experiences
- Tool ratings & reviews
- Usage tips in comments
- Bookmark favorites
- See what's popular

---

## 🗂️ CONTENT ORGANIZATION

### Categories

```
📚 Library Vault
  │
  ├─ 🎓 AI Learning Path (Tutorials)
  │   ├─ AI Basics for Moms
  │   ├─ Writing Great Prompts
  │   ├─ Understanding AI Models
  │   ├─ AI Safety for Kids
  │   ├─ Image Generation 101
  │   └─ Automation for Beginners
  │
  ├─ 🏃 Quick Solutions (Daily Help)
  │   ├─ Task Breaker
  │   ├─ Meal Planner
  │   ├─ Homework Helper
  │   ├─ Story Generator
  │   └─ Quick Compliment
  │
  ├─ 👨‍👩‍👧‍👦 Family Communication
  │   ├─ Conflict Mediator
  │   ├─ Me With Manners
  │   ├─ Apology Helper
  │   ├─ Difficult Conversation Scripts
  │   └─ Family Meeting Agenda
  │
  ├─ 📖 Learning & Education
  │   ├─ Study Guide Creator
  │   ├─ Concept Explainer
  │   ├─ Reading Comprehension Coach
  │   ├─ Math Problem Solver
  │   └─ Project Planner
  │
  ├─ 🎨 Creative & Fun
  │   ├─ Joke Writer
  │   ├─ Riddle Maker
  │   ├─ Scavenger Hunt Builder
  │   ├─ Poetry Helper
  │   └─ Song Parody Creator
  │
  ├─ 💰 Home Management
  │   ├─ Receipt Analyzer
  │   ├─ Budget Tracker
  │   ├─ Chore Chart Builder
  │   ├─ Cleaning Schedule
  │   └─ Calendar Conflict Detector
  │
  └─ 👩‍💼 Creator Tools (Advanced)
      ├─ Prompt Template Builder
      ├─ Workflow Creator
      ├─ Persona Designer
      └─ Custom GPT Builder
```

---

## 🎨 USER INTERFACE

### Main Library View (Netflix-Style)

```
┌───────────────────────────────────────────────┐
│  📚 Library Vault                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                               │
│  🔍 Search tools and tutorials...             │
│  [Filter by: All ▼] [Sort: Popular ▼]        │
│                                               │
│  ⭐ Featured This Week                        │
│  ◄ ──────────────────────────────────── ►    │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐         │
│  │ 📸 │ │ 🍳 │ │ 📝 │ │ 🎨 │ │ 💡 │         │
│  │Tool│ │Meal│ │Task│ │Art │ │Help│         │
│  │ 1  │ │Plan│ │Brk │ │Idea│ │Chat│         │
│  └────┘ └────┘ └────┘ └────┘ └────┘         │
│                                               │
│  🎓 New to AI? Start Here                     │
│  ◄ ──────────────────────────────────── ►    │
│  [Tutorial Cards in scrollable row]          │
│                                               │
│  🏃 Quick Solutions                           │
│  ◄ ──────────────────────────────────── ►    │
│  [Tool Cards in scrollable row]              │
│                                               │
│  👨‍👩‍👧‍👦 Family Communication                  │
│  ◄ ──────────────────────────────────── ►    │
│  [Tool Cards in scrollable row]              │
│                                               │
│  📖 Your Bookmarks (5)                        │
│  [Saved tools quick access]                   │
└───────────────────────────────────────────────┘
```

### Individual Tool Card

```
┌─────────────────────────┐
│  [Preview Image]        │
│                         │
│  🍳 Meal Planner        │
│  ⭐⭐⭐⭐⭐ (47 reviews)  │
│                         │
│  Quick, family-friendly │
│  meals with what you    │
│  have on hand.          │
│                         │
│  🏷️ Essential Tier      │
│  ⏱️ 5 minutes           │
│                         │
│  ❤️ 234  💬 12  ⭐ 47   │
│                         │
│  [Try Now] [+ Dashboard]│
└─────────────────────────┘
```

---

## 🔍 TOOL DETAIL MODAL

### When User Clicks Tool Card

```
┌───────────────────────────────────────────────┐
│  ← Back to Library                     [×]    │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                               │
│  🍳 Weekly Meal Planner                       │
│  ⭐⭐⭐⭐⭐ 4.8 (47 reviews)                    │
│                                               │
│  [Large Preview Image/Video]                  │
│                                               │
│  📝 Description                               │
│  Plan a week of family-friendly meals based   │
│  on what you have, dietary needs, and time.   │
│  Generates shopping lists automatically.      │
│                                               │
│  ⏱️ Time: 5-10 minutes                        │
│  🎯 Difficulty: Beginner                      │
│  🏷️ Tier: Essential                           │
│                                               │
│  ✨ What You'll Get:                          │
│  • 7 dinner ideas                             │
│  • Shopping list organized by store section   │
│  • Prep time estimates                        │
│  • Kid-friendly options                       │
│                                               │
│  📋 Prerequisites: None                       │
│                                               │
│  [Try This Tool] [+ Add to Dashboard]         │
│  [♥ Save] [⭐ Review]                          │
│                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                               │
│  💬 Comments (12)                             │
│                                               │
│  👩 Sarah M. · 2 days ago                     │
│  "This saved me SO much time! The shopping    │
│  list feature is genius."                     │
│  👍 8  💬 Reply                                │
│                                               │
│  👩 Jessica T. · 1 week ago                   │
│  "Pro tip: I add my family's allergies in     │
│  the Notes section and it remembers!"         │
│  👍 15  💬 Reply                               │
│                                               │
│  [Load More Comments]                         │
│  [Add Your Comment]                           │
│                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                               │
│  📊 Related Tools You Might Like              │
│  [Recipe Scaler] [Pantry Inventory]          │
└───────────────────────────────────────────────┘
```

---

## 💬 SOCIAL FEATURES (INTERNAL ONLY)

### What Users CAN Do

✅ **Like** - Quick appreciation
✅ **Comment** - Share tips and experiences
✅ **Bookmark/Save** - Personal collection
✅ **Rate** - 1-5 stars
✅ **Review** - Written feedback

### What Users CANNOT Do

❌ **Share externally** - No Facebook, Twitter, etc.
❌ **Export tools** - Subscriber-only content protected
❌ **Screenshot prevention** - Not enforced, but discouraged

**Why Internal Only:**
- Protects subscriber value
- Prevents content theft
- Builds internal community
- Encourages subscriptions

### Social Features UI

```
Tool engagement bar:
❤️ 234 likes  💬 12 comments  ⭐ 47 saves  📊 1.2K views

[♥ Like] [💬 Comment] [⭐ Save]
```

---

## 🎯 "ADD TO DASHBOARD" FEATURE

### User Flow

```
1. Mom browses Library
   ↓
2. Finds "Meal Planner" tool
   ↓
3. Clicks "Add to Dashboard"
   ↓
4. Widget added to Dashboard
   ↓
5. Can use tool without returning to Library
   ↓
6. Can reposition on Dashboard (Pinterest-style)
```

### Implementation

**File:** `src/components/Library/ToolCard.tsx`

```typescript
const handleAddToDashboard = async (toolId: string) => {
  // Save to user_dashboard_widgets table
  const { error } = await supabase
    .from('user_dashboard_widgets')
    .insert({
      user_id: user.id,
      widget_type: 'library_tool',
      tool_id: toolId,
      position: calculateNextPosition(), // Auto-position
      size: 'medium',
      settings: {}
    });

  if (!error) {
    toast.success('Added to Dashboard!');
    navigate('/dashboard');
  }
};
```

---

## 📊 SUBSCRIPTION TIER GATING

### Tier Access

**Essential Tier:**
- All tutorials
- Basic tools (40-50 tools)
- Quick Solutions category
- Family Communication category
- Learning & Education category

**Enhanced Tier:**
- Everything in Essential
- Home Management tools
- Advanced tutorials
- More complex tools

**Full Magic Tier:**
- Everything in Enhanced
- Creator Tools category
- Advanced automation
- Premium templates

**Creator Tier:**
- Everything in Full Magic
- Tool builder access
- Marketplace submission
- Revenue sharing

### Locked Tool UI

```
┌─────────────────────────┐
│  [Preview Image]        │
│  🔒 Locked              │
│                         │
│  📊 Advanced Analytics  │
│                         │
│  Track family metrics   │
│  and AI usage patterns. │
│                         │
│  Unlock with:           │
│  🎯 Full Magic Tier     │
│                         │
│  [Upgrade to Unlock]    │
└─────────────────────────┘
```

---

## 📚 TUTORIAL SYSTEM

### Tutorial Types

**1. Video Tutorials (Gamma Embeds)**
```
┌─────────────────────────────┐
│  [Gamma Page Embed]         │
│  Interactive slides         │
│  with video                 │
│                             │
│  ◄ Prev    Next ►           │
└─────────────────────────────┘
```

**2. Interactive Practice**
```
Try it yourself:
┌─────────────────────────────┐
│ Write a prompt for:         │
│ "Help my 8-year-old with    │
│  fractions homework"        │
│                             │
│ [Your prompt here...]       │
│                             │
│ [Check My Work]             │
└─────────────────────────────┘

✅ Great! You included the age
✅ You specified the topic
💡 Consider adding learning style
```

**3. Step-by-Step Guides**
```
Step 1 of 5: Understanding AI Basics
━━━━━━━━━━░░░░░░░░░░

[Content]

[Previous] [Next] [Skip Tutorial]
```

---

## 🗄️ DATABASE SCHEMA

### Tables

```sql
CREATE TABLE library_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  short_description TEXT,
  full_description TEXT,
  category TEXT NOT NULL,
  subcategory TEXT,
  difficulty_level TEXT DEFAULT 'beginner',
  estimated_time_minutes INTEGER,
  content_type TEXT NOT NULL, -- 'tutorial', 'tool', 'template', 'workflow'

  -- Tier gating
  required_tier TEXT NOT NULL DEFAULT 'essential',

  -- Content
  gamma_page_url TEXT,
  thumbnail_url TEXT,
  preview_image_url TEXT,
  tool_config JSONB, -- For interactive tools

  -- Metadata
  tags TEXT[],
  prerequisites TEXT[],
  learning_outcomes TEXT[],
  related_tools TEXT[],

  -- Display
  is_featured BOOLEAN DEFAULT false,
  is_new BOOLEAN DEFAULT false,
  sort_order INTEGER DEFAULT 0,

  -- Engagement
  view_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,
  bookmark_count INTEGER DEFAULT 0,
  comment_count INTEGER DEFAULT 0,
  average_rating DECIMAL DEFAULT 0,

  -- Tracking
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  created_by UUID REFERENCES family_members(id),
  status TEXT DEFAULT 'published'
);

-- Engagement Tables

-- Likes
CREATE TABLE library_item_likes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  library_item_id UUID REFERENCES library_items(id),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, library_item_id)
);

-- Comments
CREATE TABLE library_item_comments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  library_item_id UUID REFERENCES library_items(id),
  user_id UUID REFERENCES auth.users(id),
  parent_comment_id UUID REFERENCES library_item_comments(id),
  content TEXT NOT NULL,
  like_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  is_deleted BOOLEAN DEFAULT false
);

-- Bookmarks/Saves
CREATE TABLE user_library_bookmarks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  library_item_id UUID REFERENCES library_items(id),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, library_item_id)
);

-- Reviews/Ratings
CREATE TABLE library_item_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  library_item_id UUID REFERENCES library_items(id),
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  review_text TEXT,
  helpful_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, library_item_id)
);

-- Usage tracking
CREATE TABLE library_usage_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  library_item_id UUID REFERENCES library_items(id),
  action TEXT, -- 'viewed', 'started', 'completed', 'added_to_dashboard'
  duration_seconds INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 🚀 FUTURE ENHANCEMENTS

### Phase 1: Basic Library
- [x] Tool browsing
- [x] Social features (like, comment, save)
- [x] Tier gating
- [x] Add to Dashboard

### Phase 2: Personalization
- [ ] AI-recommended tools based on usage
- [ ] "Moms like you also use..."
- [ ] Custom tool collections
- [ ] Learning paths

### Phase 3: Advanced Features
- [ ] Tool versioning
- [ ] User-submitted tools (Creator tier)
- [ ] Tool marketplace
- [ ] Revenue sharing

### Phase 4: Integration
- [ ] Context-aware tool suggestions
- [ ] Auto-populate from Archives
- [ ] Integration with Best Intentions
- [ ] Multi-tool workflows

---

## 🎯 SUCCESS METRICS

**Engagement:**
- Tools viewed per session
- Tools tried per week
- Dashboard adds per month
- Social interactions (likes, comments)

**Learning:**
- Tutorials completed
- Skill progression
- Advanced tool adoption
- Feature discovery rate

**Business:**
- Free → Paid conversion
- Tier upgrades driven by tools
- Tool-driven retention
- Most valuable tools

---

## ✅ COMPLETION CRITERIA

**User Experience:**
- [ ] Easy to browse and discover
- [ ] Beautiful, modern interface
- [ ] Fast loading (< 2 seconds)
- [ ] Social features feel natural
- [ ] Adding to Dashboard is intuitive

**Content:**
- [ ] At least 50 tools at launch
- [ ] 10+ tutorials for beginners
- [ ] Clear tier differentiation
- [ ] All tools tested and working

**Technical:**
- [ ] No broken links
- [ ] Gamma embeds work
- [ ] Social features functional
- [ ] Tier gating enforced
- [ ] Dashboard integration works

**Community:**
- [ ] Moderation system in place
- [ ] Report inappropriate content
- [ ] Helpful comments surfaced
- [ ] Spam prevention

---

The Library is where moms **learn, discover, and access** the tools that make AI magic happen! 📚✨
